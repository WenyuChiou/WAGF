# Irrigation ABM Skill Registry
# Defines available skills for Colorado River Basin irrigation farmers.
# Adapted from Hung & Yang (2021) RL-ABM-CRSS framework â€” LLM-driven version.
#
# v17: Expanded from 3 to 5 skills for graduated demand adjustment.
# Differential governance: Tier 1 blocks increase_large but allows increase_small.

skills:
  - skill_id: increase_large
    description: "Aggressively increase water demand (8-20% change). Higher yield potential but significant curtailment risk. Best when water supply is abundant."
    eligible_agent_types: ["irrigation_farmer"]
    preconditions:
      - "not at_allocation_cap"
    institutional_constraints:
      annual: true
      magnitude_type: "percentage"
      max_magnitude_pct: 20
      magnitude_default: 12
    allowed_state_changes:
      - request
      - diversion
    implementation_mapping: "env.execute_skill"
    output_schema:
      type: object
      required: [decision]
      properties:
        decision: { type: integer, enum: [1, 2, 3, 4, 5] }
    conflicts_with: []

  - skill_id: increase_small
    description: "Cautiously increase water demand (1-8% change). Modest growth with lower curtailment risk. Appropriate when conditions allow some expansion but uncertainty remains."
    eligible_agent_types: ["irrigation_farmer"]
    preconditions:
      - "not at_allocation_cap"
    institutional_constraints:
      annual: true
      magnitude_type: "percentage"
      max_magnitude_pct: 8
      magnitude_default: 4
    allowed_state_changes:
      - request
      - diversion
    implementation_mapping: "env.execute_skill"
    output_schema:
      type: object
      required: [decision]
      properties:
        decision: { type: integer, enum: [1, 2, 3, 4, 5] }
    conflicts_with: []

  - skill_id: maintain_demand
    description: "Maintain current water demand level. No change to irrigation practices. Appropriate when water availability is stable and current allocation meets needs."
    eligible_agent_types: ["irrigation_farmer"]
    preconditions: []
    institutional_constraints: {}
    allowed_state_changes: []
    implementation_mapping: "env.execute_skill"
    output_schema:
      type: object
      required: [decision]
      properties:
        decision: { type: integer, enum: [1, 2, 3, 4, 5] }
    conflicts_with: []

  - skill_id: decrease_small
    description: "Cautiously reduce water demand (1-8% change). Modest conservation that maintains most crop yield while reducing curtailment exposure."
    eligible_agent_types: ["irrigation_farmer"]
    preconditions: []
    institutional_constraints:
      annual: true
      magnitude_type: "percentage"
      max_magnitude_pct: 8
      magnitude_default: 4
    allowed_state_changes:
      - request
      - diversion
    implementation_mapping: "env.execute_skill"
    output_schema:
      type: object
      required: [decision]
      properties:
        decision: { type: integer, enum: [1, 2, 3, 4, 5] }
    conflicts_with: []

  - skill_id: decrease_large
    description: "Aggressively reduce water demand (8-20% change). Significant conservation at the cost of reduced yield potential."
    eligible_agent_types: ["irrigation_farmer"]
    preconditions: []
    institutional_constraints:
      annual: true
      magnitude_type: "percentage"
      max_magnitude_pct: 20
      magnitude_default: 12
    allowed_state_changes:
      - request
      - diversion
    implementation_mapping: "env.execute_skill"
    output_schema:
      type: object
      required: [decision]
      properties:
        decision: { type: integer, enum: [1, 2, 3, 4, 5] }
    conflicts_with: []

default_skill: maintain_demand
