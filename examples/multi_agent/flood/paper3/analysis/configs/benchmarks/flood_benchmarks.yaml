# Empirical Benchmarks for Flood ABM Validation
# L2 Macro metrics: compare simulated aggregate outcomes to empirical ranges

benchmarks:
  insurance_rate_sfha:
    range: [0.30, 0.60]
    weight: 1.0
    computation: insurance_rate_sfha
    description: "Insurance uptake rate in SFHA zones"
    # Widened upper bound: Choi et al. (2024) 48.3%, de Ruig et al. (2023) 65.9% post-Sandy

  insurance_rate_all:
    range: [0.15, 0.55]
    weight: 0.8
    computation: insurance_rate_all
    description: "Overall insurance uptake rate"
    # Widened upper bound: high SFHA fraction + post-disaster spike (Gallagher 2014)

  elevation_rate:
    range: [0.10, 0.35]
    weight: 1.0
    computation: elevation_rate
    description: "Cumulative elevation rate"
    # Brick Township NJ post-Sandy: 22% SFHA structures elevated over 8 years
    # (FEMA HMGP data). Upper bound accounts for 13-year horizon with subsidy.

  buyout_rate:
    range: [0.05, 0.25]
    weight: 0.8
    computation: buyout_rate
    description: "Cumulative buyout/relocation rate"
    # Mach et al. (2019): 43,633 properties nationally 1989-2017;
    # NJ Blue Acres: 126 homes along Passaic.

  do_nothing_rate_postflood:
    range: [0.35, 0.65]
    weight: 1.5
    computation: do_nothing_rate_postflood
    description: "Inaction rate among recently flooded"

  mg_adaptation_gap:
    range: [0.05, 0.30]
    weight: 2.0
    computation: mg_adaptation_gap
    description: "Adaptation gap between MG and NMG (composite: any protective action)"
    # Elliott & Howell (2020): racial/income disparities in FEMA aid receipt.
    # Composite metric: any_adaptation = insurance OR elevation OR buyout OR relocation.

  renter_uninsured_rate:
    range: [0.15, 0.40]
    weight: 1.0
    computation: renter_uninsured_rate
    description: "Uninsured rate among renters in flood zones"

  insurance_lapse_rate:
    range: [0.15, 0.30]
    weight: 1.0
    computation: insurance_lapse_rate
    description: "Annual insurance lapse rate"
    # Michel-Kerjan et al. (2012): median NFIP policy tenure 2-4 years

  # --- Institutional trajectory benchmarks ---
  govt_final_subsidy:
    range: [0.40, 0.75]
    weight: 1.0
    computation: govt_final_subsidy
    description: "Final government subsidy rate"
    # HMGP ~75% federal share max; state rarely exceeds

  govt_avg_subsidy:
    range: [0.45, 0.70]
    weight: 1.0
    computation: govt_avg_subsidy
    description: "Average government subsidy rate across simulation"

  govt_decrease_count:
    range: [1.0, 5.0]
    weight: 1.0
    computation: govt_decrease_count
    description: "Government decrease decisions (must decrease at least once)"
    # Budget pressure requires at least one decrease over 13 years

  govt_change_count:
    range: [3.0, 8.0]
    weight: 0.8
    computation: govt_change_count
    description: "Total government subsidy changes per simulation"
    # Policy doesn't change every year, but shouldn't be completely static

  ins_final_crs:
    range: [0.05, 0.25]
    weight: 1.0
    computation: ins_final_crs
    description: "Final CRS discount"
    # NJ Class 7-9 typical (5-15%)

  ins_avg_crs:
    range: [0.03, 0.20]
    weight: 1.0
    computation: ins_avg_crs
    description: "Average CRS discount across simulation"

  ins_improve_count:
    range: [1.0, 5.0]
    weight: 0.8
    computation: ins_improve_count
    description: "Number of CRS improvement decisions per simulation"
    # CRS changes are slow (Class changes require documented activities)

  # --- Trajectory diagnostic (P5: NFIP recalibration) ---
  insurance_trajectory_change:
    range: [-0.40, 0.10]
    weight: 0.0
    computation: insurance_trajectory_change
    description: "Relative change in overall insurance rate Y1→Y13"
    # Diagnostic only — NOT included in EPI (weight=0.0).
    # NFIP observed: -29% (2011-2023). Simulated should decline or flatten.

thresholds:
  l1:
    cacr:
      operator: ">="
      value: 0.75
    r_h:
      operator: "<="
      value: 0.10
    ebe_ratio:
      operator: range
      low: 0.1
      high: 0.9
  l2:
    epi:
      operator: ">="
      value: 0.60
